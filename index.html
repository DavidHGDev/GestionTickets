<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Tickets PRO</title>
    <link rel="stylesheet" href="css/style.css">
    
    <style>
        .sale-alert-box {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-weight: bold;
            transition: all 0.5s ease;
            border: 2px solid transparent;
            cursor: pointer;
            background-color: #f1f5f9;
            color: #475569;
        }

        .sale-alert-box input[type="checkbox"] {
            transform: scale(1.5);
            cursor: pointer;
        }

        .sale-warning {
            background-color: #fef9c3 !important;
            border-color: #eab308 !important;
            color: #854d0e !important;
            animation: pulse-border 2s infinite;
        }

        .sale-danger {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
            color: #991b1b !important;
            animation: pulse-bg 1.5s infinite;
        }

        .sale-success {
            background-color: #dcfce7 !important;
            border-color: #22c55e !important;
            color: #166534 !important;
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.2);
        }

        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0 rgba(234, 179, 8, 0.4); }
            70% { box-shadow: 0 0 0 6px rgba(234, 179, 8, 0); }
            100% { box-shadow: 0 0 0 0 rgba(234, 179, 8, 0); }
        }
        @keyframes pulse-bg {
            0% { background-color: #fee2e2; }
            50% { background-color: #fecaca; }
            100% { background-color: #fee2e2; }
        }
    </style>
</head>
<body>

<div class="card-container">
    
    <nav class="top-toolbar">
        <a href="templates.html" class="tool-btn" title="Ir a Plantillas" target="_blank">Plant</a>
        <a href="data.html" class="tool-btn" target="_blank">üìäData</a>
        <button class="tool-btn" id="btn_export" title="Descargar reporte Excel/CSV">Exportar</button>
        <button class="tool-btn" id="btn_clear_data" title="Borrar Historial" style="color: #ef4444;">üóëÔ∏è Borrar</button>
        <button class="tool-btn" id="btn_import_data" title="Subir datos de otra PC">üì§</button>
        <input type="file" id="file_selector" style="display: none;" accept=".json">
    </nav>

    <h2 style="text-align: center; color: #1e3a8a; margin-bottom: 25px; margin-top: 10px;">Nuevo Ticket</h2>

    <div class="row">
        <div class="floating-group">
            <input type="text" id="call_id" placeholder=" " autocomplete="off">
            <label for="call_id">ID Llamada / Abonado</label>
        </div>
        <div class="floating-group">
            <input type="text" id="customer_name" placeholder=" " autocomplete="off">
            <label for="customer_name">Nombre del Cliente</label>
        </div>
    </div>

    <div class="row">
        <div class="floating-group">
            <input type="number" id="customer_doc" placeholder=" " autocomplete="off">
            <label for="customer_doc">Documento</label>
        </div>
        <div class="floating-group">
            <input type="tel" id="customer_phone" placeholder=" " autocomplete="off">
            <label for="customer_phone">Tel√©fono</label>
        </div>
    </div>

    <div class="row">
        <div class="floating-group">
            <input type="text" id="prueba_smnet" placeholder=" " autocomplete="off">
            <label for="prueba_smnet">ID SMNET Integrada</label>
        </div>
        <div class="floating-group">
            <input type="text" id="smnet_unitaria" placeholder=" " autocomplete="off">
            <label for="smnet_unitaria">ID SMNET Unitaria</label>
        </div>
    </div>

    <div class="row">
        <div class="floating-group">
            <input type="text" id="tech_input" list="tech_options" placeholder=" " autocomplete="off">
            <label for="tech_input">Tecnolog√≠a</label>
            <datalist id="tech_options"></datalist> 
        </div>

        <div class="floating-group">
            <input type="text" id="prod_input" list="prod_options" placeholder=" " autocomplete="off">
            <label for="prod_input">Producto</label>
            <datalist id="prod_options"></datalist> 
        </div>

        <div class="floating-group">
            <input type="text" id="horario_falla" list="horario_options" placeholder=" " autocomplete="off">
            <label for="horario_falla">Horario Falla Recurrente</label>
            <datalist id="horario_options">
                <option value="06:00 ‚Äì 10:00">
                <option value="10:00 ‚Äì 14:00">
                <option value="14:00 ‚Äì 18:00">
                <option value="18:00 ‚Äì 22:00">
                <option value="22:00 ‚Äì 00:00">
                <option value="Todo el d√≠a">
            </datalist>
        </div>
    </div>

    <div class="row">
        <div class="floating-group">
            <input type="text" id="soporte_velocidad" list="yes_no_options" value="Si" placeholder=" " autocomplete="off">
            <label for="soporte_velocidad">¬øEquipo Soporta Velocidad?</label>
            <datalist id="yes_no_options">
                <option value="Si">
                <option value="No">
            </datalist>
        </div>

        <div class="floating-group wide">
            <input type="text" id="fail_input" list="fail_options" placeholder=" " autocomplete="off">
            <label for="fail_input">Falla Reportada</label>
            <datalist id="fail_options"></datalist> 
        </div>
    </div>

    <div class="row" style="justify-content: flex-start; gap: 20px; margin-top: -5px; margin-bottom: 10px;">
        <div class="checkbox-wrapper">
            <input type="checkbox" id="check_portal_cautivo">
            <label for="check_portal_cautivo">Verifico Portal Cautivo</label>
        </div>

        <div class="checkbox-wrapper">
            <input type="checkbox" id="check_notificacion">
            <label for="check_notificacion">Notif. Electr√≥nica Confirmada</label>
        </div>
    </div>

    <div class="floating-group">
        <textarea id="observaciones" placeholder=" " spellcheck="true"></textarea>
        <label for="observaciones">Observaciones</label>
    </div>

    <div id="venta_container" class="sale-alert-box">
        <input type="checkbox" id="check_venta_ofrecida">
        <label for="check_venta_ofrecida" style="cursor: pointer;">üí∞ ¬øOfreciste Venta / Portabilidad?</label>
    </div>

    <div class="actions">
        <button id="btn_copy">Copiar Datos</button>
        <button id="btn_reset">Reiniciar / Guardar</button>
    </div>

    <div class="b2b-section">
        <div class="b2b-header">
            <p class="section-title">¬øEs Caso B2B?</p>
            <div class="radio-group">
                <label>
                    <input type="radio" name="b2b_option" value="no" checked> No
                </label>
                <label>
                    <input type="radio" name="b2b_option" value="si"> Si
                </label>
            </div>
        </div>

        <div id="b2b_panel" class="hidden">
            <div class="floating-group">
                <input type="text" id="b2b_contact" placeholder=" " autocomplete="off">
                <label for="b2b_contact">Nombre quien atiende</label>
            </div>
            
            <div class="row">
                <div class="floating-group">
                    <input type="text" id="b2b_days" list="days_options" placeholder=" " autocomplete="off">
                    <label for="b2b_days">D√≠as Atenci√≥n</label>
                    <datalist id="days_options">
                        <option value="Lunes a Viernes">
                        <option value="Lunes a S√°bado">
                        <option value="Lunes a Domingo">
                    </datalist>
                </div>
                <div class="floating-group">
                    <input type="text" id="b2b_schedule" placeholder=" " autocomplete="off">
                    <label for="b2b_schedule">Horario (Ej: 8am-5pm)</label>
                </div>
            </div>

            <div class="checkbox-wrapper">
                <input type="checkbox" id="b2b_permission">
                <label for="b2b_permission">Requiere Permiso Especial</label>
            </div>
        </div>
    </div>

    <div class="key-bar">
        <span class="key-label">Claves R√°pidas:</span>
        <div class="key-buttons">
            <button class="btn-key refres" id="btn_key_mod">Modificar</button>
            <button class="btn-key" id="btn_key_elite">Elite</button>
            <button class="btn-key" id="btn_key_fenix">Fenix</button>
            <button class="btn-key" id="btn_key_pwd">PWD</button>
            
            <button class="btn-key mod" id="btn_key_refres">Refres</button>
        </div>
    </div>

    <div id="timer_panel" class="timer-panel hidden">
        <div class="timer-box">
            <span class="timer-label">üìû Duraci√≥n Total</span>
            <span id="display_total" class="timer-value">00:00</span>
        </div>
        <div class="timer-divider"></div>
        <div class="timer-box">
            <span class="timer-label">üîî Pr√≥ximo Aviso</span>
            <span id="display_countdown" class="timer-value countdown">00:00</span>
        </div>
    </div>

    <div class="stats-container">
        <div class="stat-card">
            <span class="stat-label">AHT Diario</span>
            <span class="stat-value" id="aht_daily_display">0s / 00:00</span>
            <span class="stat-sub">Promedio Hoy</span>
        </div>
        <div class="stat-card">
            <span class="stat-label">AHT Mensual</span>
            <span class="stat-value" id="aht_monthly_display">0s / 00:00</span>
            <span class="stat-sub">Acumulado</span>
        </div>
    </div>

</div>

<div id="modal_claves" class="modal-overlay hidden">
    <div class="modal-content">
        <h3>üîê Configurar Claves R√°pidas</h3>
        
        <div class="form-group-modal">
            <label>Bot√≥n Elite:</label>
            <input type="text" id="edit_key_elite">
        </div>
        <div class="form-group-modal">
            <label>Bot√≥n Fenix:</label>
            <input type="text" id="edit_key_fenix">
        </div>
        <div class="form-group-modal">
            <label>Bot√≥n PWD:</label>
            <input type="text" id="edit_key_pwd">
        </div>

        <div class="modal-actions">
            <button id="btn_cancelar_modal" class="btn-cancel">Cancelar</button>
            <button id="btn_guardar_modal" class="btn-save">Guardar Cambios</button>
        </div>
    </div>
</div>

<script src="js/db.js"></script> 
<script src="js/app.js"></script>

</body>
</html>